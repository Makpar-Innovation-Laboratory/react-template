<div id="login-container" [@float]>
  <mat-card id="login-card" class="mat-elevation-z8">
    <mat-card-title id="login-card-title" class="mat-headline text-primary">
      Sign In
    </mat-card-title>
    <mat-card-content id="login-form-container">
      <form [formGroup]="loginFormGroup" (ngSubmit)="login()">
        <mat-form-field id="email-form-field" class="login-form-field" color="accent">
          <mat-label>Email</mat-label>
          <input matInput id="email-input" formControlName="email" type="text"
                  aria-label="email-input" (keydown.enter)="login()"/>
          <button matSuffix mat-icon-button id="email-clear-button"
                  type="button" aria-label="email-clear-button"
                  *ngIf="this.loginFormGroup.controls.email.value"
                  (click)="this.loginFormGroup.controls.email.setValue('')">
            <mat-icon id="email-clear-icon" color="primary">close</mat-icon>
          </button>
          <mat-error *ngIf="loginFormGroup.controls.email.hasError('email')">
            Please enter a valid email
          </mat-error>
          <mat-error *ngIf="loginFormGroup.controls.email.hasError('required')">
            This field is <strong>required</strong>
          </mat-error>
        </mat-form-field>
        <mat-form-field id="password-form-field" class="login-form-field" color="accent">
          <mat-label>Password</mat-label>
          <input matInput id="password-input" formControlName="password"
                  autocomplete="current-password" aria-label="password-input"
                  [type]="hidePassword ? 'password' : 'text'" (keydown.enter)="login()"/>
          <button matSuffix mat-icon-button id="password-clear-button"
                  type="button" aria-label="password-clear-button"
                  *ngIf="this.loginFormGroup.controls.password.value"
                  (click)="this.loginFormGroup.controls.password.setValue('')">
            <mat-icon id="password-clear-icon" color="primary">close</mat-icon>
          </button>
          <button mat-icon-button matSuffix id="password-hide-button"
                  type="button" (click)="hidePassword = !hidePassword"
                  [attr.aria-label]="'password-hide-button'"
                  [attr.aria-pressed]="hidePassword">
            <mat-icon>{{ hidePassword ? "visibility_off" : "visibility"}}</mat-icon>
          </button>
          <mat-error *ngIf="loginFormGroup.controls.password.hasError('required')">
            This field is <strong>required</strong>
          </mat-error>
        </mat-form-field>
      </form>
    </mat-card-content>
    <mat-card-actions id="login-card-actions">
      <button mat-raised-button id="login-button" color="primary" (click)="login()" 
              [disabled]="loginFormGroup.touched && loginFormGroup.invalid"
              [@highlight]="loginBtnHighlightCntl.state" [@scale]="loginBtnScaleCntl.state"
              (mouseenter)="animateLoginBtn()" (mouseleave)="primeLoginBtn()">
        Sign In
      </button>
      <button mat-stroked-button id="register-button" routerLink="/register">
        Sign Up
      </button>
    </mat-card-actions>
    <mat-card-footer id="login-card-footer">
      <mat-progress-bar id="login-card-progress-bar" mode="buffer" 
                        color="primary" *ngIf="loading"></mat-progress-bar>
    </mat-card-footer>
  </mat-card>
</div>
